Explain the selected code for a new contributor:
- Purpose, inputs/outputs
- Dependencies and side effects
- Edge cases and tradeoffs
